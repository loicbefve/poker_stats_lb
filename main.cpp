#include "HistoryFile.h"
#include <iostream>
#include "./Grammar/HistoryFileGrammarLexer.h"
#include "./Grammar/HistoryFileGrammarParser.h"

using namespace antlrcpptest;
using namespace antlr4;


int main(int argc, char *argv[]) {

  ANTLRInputStream input(Winamax Poker - Tournament "Freeroll" buyIn: 0€ + 0€ level: 1 - HandId: #939583448153063477-1-1514725228 - Holdem no limit (3/10/20) - 2017/12/31 13:00:28 UTC
  Table: 'Freeroll(218763819)#052' 6-max (real money) Seat #2 is the button
  Seat 1: Chlambert62 (3000)
  Seat 2: saphira9 (3000)
  Seat 3: JPhiR (3000)
  Seat 4: Balbo6z (3000)
  Seat 5: FcBGM (3000)
  Seat 6: SIRCROCO13 (3000)
  *** ANTE/BLINDS ***
  JPhiR posts ante 3
  Balbo6z posts ante 3
  Chlambert62 posts ante 3
  saphira9 posts ante 3
  FcBGM posts ante 3
  SIRCROCO13 posts ante 3
  JPhiR posts small blind 10
  Balbo6z posts big blind 20
  Dealt to Balbo6z [Kc 4d]
  *** PRE-FLOP ***
  FcBGM folds
  SIRCROCO13 folds
  Chlambert62 folds
  saphira9 calls 20
  JPhiR calls 10
  Balbo6z checks
  *** FLOP *** [Kd Qc Jh]
  JPhiR checks
  Balbo6z checks
  saphira9 checks
  *** TURN *** [Kd Qc Jh][7c]
  JPhiR bets 39
  Balbo6z calls 39
  saphira9 folds
  *** RIVER *** [Kd Qc Jh 7c][5h]
  JPhiR bets 78
  Balbo6z raises 182 to 260
  JPhiR raises 260 to 520
  Balbo6z calls 260
  *** SHOW DOWN ***
  Balbo6z shows [Kc 4d] (One pair : Kings)
  JPhiR shows [Td Ah] (Straight Ace high)
  JPhiR collected 1196 from pot
  *** SUMMARY ***
  Total pot 1196 | No rake
  Board: [Kd Qc Jh 7c 5h]
  Seat 3: JPhiR (small blind) showed [Td Ah] and won 1196 with Straight Ace high
  Seat 4: Balbo6z (big blind) showed [Kc 4d] and lost with One pair : Kings


  Winamax Poker - Tournament "Freeroll" buyIn: 0€ + 0€ level: 1 - HandId: #939583448153063477-2-1514725352 - Holdem no limit (3/10/20) - 2017/12/31 13:02:32 UTC
  Table: 'Freeroll(218763819)#052' 6-max (real money) Seat #3 is the button
  Seat 1: Chlambert62 (2997)
  Seat 2: saphira9 (2977)
  Seat 3: JPhiR (3614)
  Seat 4: Balbo6z (2418)
  Seat 5: FcBGM (2997)
  Seat 6: SIRCROCO13 (2997)
  *** ANTE/BLINDS ***
  Balbo6z posts ante 3
  FcBGM posts ante 3
  Chlambert62 posts ante 3
  saphira9 posts ante 3
  JPhiR posts ante 3
  SIRCROCO13 posts ante 3
  Balbo6z posts small blind 10
  FcBGM posts big blind 20
  Dealt to Balbo6z [Kd 8h]
  *** PRE-FLOP ***
  SIRCROCO13 folds
  Chlambert62 folds
  saphira9 calls 20
  JPhiR folds
  Balbo6z folds
  FcBGM checks
  *** FLOP *** [5h 7h Jh]
  FcBGM checks
  saphira9 checks
  *** TURN *** [5h 7h Jh][3c]
  FcBGM checks
  saphira9 checks
  *** RIVER *** [5h 7h Jh 3c][Th]
  FcBGM checks
  saphira9 checks
  *** SHOW DOWN ***
  saphira9 shows [8s Qs] (High card : Queen)
  FcBGM shows [4d 9h] (Flush Jack high)
  FcBGM collected 68 from pot
  *** SUMMARY ***
  Total pot 68 | No rake
  Board: [5h 7h Jh 3c Th]
  Seat 2: saphira9 showed [8s Qs] and lost with High card : Queen
  Seat 5: FcBGM (big blind) showed [4d 9h] and won 68 with Flush Jack high


  Winamax Poker - Tournament "Freeroll" buyIn: 0€ + 0€ level: 1 - HandId: #939583448153063477-3-1514725389 - Holdem no limit (3/10/20) - 2017/12/31 13:03:09 UTC
  Table: 'Freeroll(218763819)#052' 6-max (real money) Seat #4 is the button
  Seat 1: Chlambert62 (2994)
  Seat 2: saphira9 (2954)
  Seat 3: JPhiR (3611)
  Seat 4: Balbo6z (2405)
  Seat 5: FcBGM (3042)
  Seat 6: SIRCROCO13 (2994)
  *** ANTE/BLINDS ***
  FcBGM posts ante 3
  SIRCROCO13 posts ante 3
  Chlambert62 posts ante 3
  saphira9 posts ante 3
  JPhiR posts ante 3
  Balbo6z posts ante 3
  FcBGM posts small blind 10
  SIRCROCO13 posts big blind 20
  Dealt to Balbo6z [9d 5c]
  *** PRE-FLOP ***
  Chlambert62 folds
  saphira9 calls 20
  JPhiR folds
  Balbo6z folds
  FcBGM folds
  SIRCROCO13 checks
  *** FLOP *** [8c 3c 9c]
  SIRCROCO13 bets 68
  saphira9 calls 68
  *** TURN *** [8c 3c 9c][Jh]
  SIRCROCO13 bets 204
  saphira9 calls 204
  *** RIVER *** [8c 3c 9c Jh][6h]
  SIRCROCO13 bets 612
  saphira9 folds
  SIRCROCO13 collected 1224 from pot
  *** SUMMARY ***
  Total pot 1224 | No rake
  Board: [8c 3c 9c Jh 6h]
  Seat 6: SIRCROCO13 (big blind) won 1224);
  TLexer lexer(&input);
  CommonTokenStream tokens(&lexer);

  tokens.fill();
  for (auto token : tokens.getTokens()) {
    std::cout << token->toString() << std::endl;
  }

  TParser parser(&tokens);
  tree::ParseTree* tree = parser.main();

  std::cout << tree->toStringTree(&parser) << std::endl << std::endl;

return 0;

  // string filejiji("20171114_Sit&Go Freeroll(215113436)_real_holdem_no-limit.txt");
  // HistoryFile* file1 = new HistoryFile( filejiji );
  // return 0;
}
